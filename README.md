# ğŸŒ Kikuyu-English Translation Collection Platform

A mobile-first, community-powered web platform for collecting Kikuyu-English translation data. This tool guides users through structured prompts generated by a language model (LLM) and stores their translations for future use in training a machine translation model.

## ğŸ¯ Project Goals

- **Preserve and promote the Kikuyu language** through digital documentation
- **Collect high-quality, diverse translation pairs** from native speakers
- **Use structured prompts** to avoid repetition, abuse, and low-quality input
- **Empower human reviewers** to moderate and validate submissions
- **Build a dataset** suitable for training a Transformer-based translation model

## ğŸ› ï¸ Tech Stack

### Frontend
- **HTML5 + CSS3**
- **Tailwind CSS** (responsive, mobile-first design)
- **JavaScript** (vanilla JS for interactivity)

### Backend
- **Flask (Python)** â€“ lightweight and scalable
- **SQLite** â€“ simple local database for storing prompts and translations
- **Jinja2** â€“ Flask's templating engine for rendering pages
- **SQLAlchemy** â€“ ORM for database operations
- **WTForms** â€“ form validation

### LLM Integration
- **OpenRouter API** â€“ for generating culturally relevant English prompts
- **Local JSON caching** â€“ efficient prompt storage and delivery
- **Automatic refill system** â€“ maintains prompt availability

## ğŸš€ Quick Start

### Prerequisites
- Python 3.8 or higher
- OpenRouter API key (get one at [openrouter.ai](https://openrouter.ai/keys))

### Installation

1. **Clone the repository**
   ```bash
   git clone <repository-url>
   cd kikuyu
   ```

2. **Create virtual environment**
   ```bash
   python3 -m venv venv
   source venv/bin/activate  # On Windows: venv\Scripts\activate
   ```

3. **Install dependencies**
   ```bash
   pip install -r requirements.txt
   ```

4. **Configure environment variables**
   ```bash
   cp .env.example .env
   # Edit .env with your configuration
   ```

5. **Run the application**
   ```bash
   python run.py
   ```

6. **Open in browser**
   Visit `http://localhost:5000` to access the platform

## âš™ï¸ Configuration

### Environment Variables

Create a `.env` file with the following variables:

```env
# Flask Configuration
FLASK_ENV=development
SECRET_KEY=your-secret-key-here

# Database
DATABASE_URL=sqlite:///instance/kikuyu.db

# OpenRouter API
OPENROUTER_API_KEY=your-openrouter-api-key-here

# Admin Access
ADMIN_PASSWORD=your-admin-password-here

# Optional Settings (with defaults)
DAILY_SUBMISSION_LIMIT=10
RATE_LIMIT_PER_HOUR=5
MIN_CACHE_SIZE=10
PROMPT_BATCH_SIZE=20
```

### Database Setup

The database will be automatically created when you first run the application. The SQLite database will be stored in `instance/kikuyu.db`.

## ğŸ“± User Flow

### For Contributors

1. **Landing Page** â€“ Welcome message and project overview
2. **Translation Interface** â€“ Receive an English prompt and provide Kikuyu translation
3. **Thank You Page** â€“ Confirmation and progress tracking
4. **Rate Limiting** â€“ Maximum 10 translations per day to ensure quality

### For Administrators

1. **Admin Login** â€“ Secure access to dashboard
2. **Review Submissions** â€“ Moderate pending translations
3. **Cache Management** â€“ Monitor and refill prompt cache
4. **Data Export** â€“ Download approved translations

## ğŸ”„ Prompt Flow System

### How It Works

1. **Prompt Generation** â€“ OpenRouter API generates culturally appropriate English sentences
2. **Local Caching** â€“ Prompts stored in `instance/prompts.json` for efficient delivery
3. **Smart Distribution** â€“ Each user receives unique, unused prompts
4. **Automatic Refill** â€“ System monitors cache levels and refills when low
5. **Admin Control** â€“ Manual cache management via admin dashboard

### API Usage

- **Free Tier Limit**: 50 requests per day
- **Efficient Caching**: Generates 20 prompts per batch
- **Smart Monitoring**: Auto-refill when <10 prompts remain

## ğŸ›¡ï¸ Quality Control

- **Structured Prompts Only** â€“ No freeform submissions
- **Rate Limiting** â€“ Prevents spam and ensures thoughtful contributions
- **Duplicate Detection** â€“ Automatic checking for repeated translations
- **Human Moderation** â€“ Admin review and approval system
- **Input Validation** â€“ Comprehensive text validation and sanitization

## ğŸ‘¨â€ğŸ’¼ Admin Features

### Dashboard Access
- Secure password-based authentication
- Overview of platform statistics
- Real-time cache monitoring

### Submission Review
- View all translations with filtering options
- Approve, reject, or flag submissions
- Add moderation notes
- Track admin actions

### Cache Management
- Monitor prompt cache status
- Manual cache refill
- API usage tracking
- Connection testing

### Data Export
- Export approved translations as JSON
- Filter by status and date
- Clean, structured data format

## ğŸ“Š Database Schema

### Core Models

- **Prompt** â€“ English sentences for translation
- **Translation** â€“ User-submitted Kikuyu translations
- **User** â€“ Session-based user tracking
- **AdminAction** â€“ Moderation history

### Relationships

- One prompt can have many translations
- One user can submit many translations
- Each translation links to one prompt and one user
- Admin actions track moderation decisions

## ğŸ§ª Development

### Project Structure

```
kikuyu/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py          # Flask app factory
â”‚   â”œâ”€â”€ models.py            # Database models
â”‚   â”œâ”€â”€ routes.py            # URL routes and views
â”‚   â”œâ”€â”€ forms.py             # WTForms
â”‚   â”œâ”€â”€ utils.py             # Helper functions
â”‚   â””â”€â”€ services/
â”‚       â”œâ”€â”€ openrouter.py    # OpenRouter API client
â”‚       â””â”€â”€ prompt_cache.py  # Cache management
â”œâ”€â”€ templates/               # Jinja2 templates
â”œâ”€â”€ static/                  # CSS, JS, images
â”œâ”€â”€ instance/               # Database and cache files
â”œâ”€â”€ config.py               # Configuration classes
â”œâ”€â”€ run.py                  # Application entry point
â””â”€â”€ requirements.txt        # Python dependencies
```

### Adding New Features

1. **Models** â€“ Define in `app/models.py`
2. **Routes** â€“ Add to `app/routes.py`
3. **Templates** â€“ Create in `templates/`
4. **Forms** â€“ Define in `app/forms.py`
5. **Utilities** â€“ Add to `app/utils.py`

### Testing

```bash
# Run basic syntax check
python -m py_compile app/*.py

# Test database creation
python -c "from app import create_app; app = create_app(); app.app_context().push(); from app import db; db.create_all()"

# Test OpenRouter connection (requires API key)
python -c "from app.services.openrouter import OpenRouterClient; client = OpenRouterClient(); print(client.test_connection())"
```

## ğŸŒ Deployment

### Production Checklist

- [ ] Set `FLASK_ENV=production`
- [ ] Use strong `SECRET_KEY`
- [ ] Configure proper `ADMIN_PASSWORD`
- [ ] Set up database backups
- [ ] Configure reverse proxy (nginx)
- [ ] Set up SSL certificates
- [ ] Monitor logs and errors

### Hosting Options

- **Free**: PythonAnywhere, Render, Replit
- **Paid**: DigitalOcean, AWS, Google Cloud
- **Recommended**: Start with free tier, scale as needed

## ğŸ“ˆ Analytics & Monitoring

### Key Metrics

- Translation submission rates
- User engagement patterns
- Prompt cache efficiency
- OpenRouter API usage
- Admin moderation statistics

### Monitoring Tools

- Built-in admin dashboard
- Flask logs
- Database query monitoring
- API usage tracking

## ğŸ¤ Contributing

### Community Guidelines

1. **Quality First** â€“ Focus on accurate, natural translations
2. **Cultural Respect** â€“ Honor Kikuyu language and culture
3. **Collaborative Spirit** â€“ Work together for language preservation

### For Developers

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Test thoroughly
5. Submit a pull request

## ğŸ“„ License

This project is developed for educational and cultural preservation purposes. Please respect the Kikuyu community and use responsibly.

## ğŸ™ Acknowledgments

- Kikuyu language community
- OpenRouter for API access
- Contributors and translators
- Cultural advisors and validators

## ğŸ“ Support

- **Issues**: Report bugs via GitHub issues
- **Questions**: Community discussions
- **Cultural Guidance**: Consult with native speakers

---

**Built with â¤ï¸ for the Kikuyu community**

*Every translation helps preserve a language, a culture, and a heritage.*